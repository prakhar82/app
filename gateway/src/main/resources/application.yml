server:
  port: 8080
spring:
  cloud:
    gateway:
      globalcors:
        cors-configurations:
          '[/**]':
            allowedOrigins: "${APP_CORS_ALLOWED_ORIGINS:http://localhost,http://localhost:4200,http://localhost:8080,http://127.0.0.1,http://127.0.0.1:8080}"
            allowedMethods: [GET,POST,PUT,PATCH,DELETE,OPTIONS]
            allowedHeaders: "*"
            allowCredentials: true
      routes:
        - id: identity
          uri: ${IDENTITY_URI:http://identity-service:8081}
          predicates: [ Path=/api/identity/** ]
          filters: [ StripPrefix=2 ]
        - id: postcode
          uri: ${IDENTITY_URI:http://identity-service:8081}
          predicates: [ Path=/api/postcode/** ]
          filters: [ StripPrefix=1 ]
        - id: catalog
          uri: ${CATALOG_URI:http://catalog-service:8082}
          predicates: [ Path=/api/catalog/** ]
          filters: [ StripPrefix=2 ]
        - id: inventory
          uri: ${INVENTORY_URI:http://inventory-service:8083}
          predicates: [ Path=/api/inventory/** ]
          filters: [ StripPrefix=2 ]
        - id: cart
          uri: ${CART_URI:http://cart-service:8084}
          predicates: [ Path=/api/cart/** ]
          filters: [ StripPrefix=2 ]
        - id: order
          uri: ${ORDER_URI:http://order-service:8085}
          predicates: [ Path=/api/orders/** ]
          filters: [ StripPrefix=2 ]
        - id: payment
          uri: ${PAYMENT_URI:http://payment-service:8086}
          predicates: [ Path=/api/payments/** ]
          filters: [ StripPrefix=2 ]
management:
  endpoints:
    web:
      exposure:
        include: health,info
springdoc:
  swagger-ui:
    urls:
      - name: identity
        url: /api/identity/v3/api-docs
      - name: postcode
        url: /api/postcode/v3/api-docs
      - name: catalog
        url: /api/catalog/v3/api-docs
      - name: inventory
        url: /api/inventory/v3/api-docs
      - name: cart
        url: /api/cart/v3/api-docs
      - name: orders
        url: /api/orders/v3/api-docs
      - name: payments
        url: /api/payments/v3/api-docs
